##  **Описание сервисов Telegram-бота**

### 1. **Telegram Bot (Aiogram)**
- **Назначение:** Обрабатывает команды и сообщения пользователей.
---

### 2. **FSM (Finite State Machine)**
- **Назначение:** Управление состояниями пользователя при заполнении/редактировании анкеты.
---

### 3. **RabbitMQ**
- **Назначение:** Передача данных анкеты или событий между микросервисами (асинхронно).
- **Пример:** Для передачи задач в consumer используется очередь `profiles_queue`, после оработки запроса, ответ уходит в личную очередь для каждого пользователя.

---

### 4. **MinIO (S3-хранилище)**
- **Назначение:** Хранение пользовательских фотографий.
- **Формат хранения:** `photos-{user_id}/{photo name}.jpg`.

---

### 5. **PostgreSQL**
- **Назначение:** Основная база данных для хранения анкет, предпочтений, лайков и истории взаимодействий.
- **Таблицы:**
  - `users`
  - `profiles`
  - `likes`
  - `matches`
  - `preferences`

---

### 6. **Celery Worker**
- **Назначение:** Фоновая обработка задач (например, пересчет рейтинга пользователей, матчинг).
- **Источники задач:**
  - Очередь RabbitMQ.
  - Периодические задачи (через Celery beat).

---

### 7. **Prometheus**
- **Назначение:** Сбор метрик.
- **Экспонируются через отдельный `/metrics` endpoint.**

